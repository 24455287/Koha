<!-- TMPL_INCLUDE NAME="doc-head-open.inc" -->Koha -- Catalog: Advanced MARC Search<!-- TMPL_INCLUDE NAME="doc-head-close.inc" -->
<!-- TMPL_INCLUDE NAME="masthead.inc" -->
<!-- TMPL_INCLUDE NAME="search-topmenu.inc" -->
<!-- TMPL_INCLUDE NAME="intranet-nav.inc" -->

<div id="main">
<h1>Пошук у каталозі</h1>
<form name="f" method="post" action="search.pl">
<input type="hidden" name="op" value="do_search" />
<input type="hidden" name="type" value="intranet" />
<input type="hidden" name="nbstatements" value="<!-- TMPL_VAR NAME="nbstatements" -->" />

<div class="data">
<table>
<caption>Простий пошук</caption>
					<tr>
			<th><label for="keyword_main">Будь-яка <span class="accesskey" title="Access Key w">w</span>ord</label></th>
			<td><input type="hidden" name="marclist" value="" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="keyword_main" name="value" onchange="sql_update()" size="35" accesskey="w" /></td>
		</tr>
		<tr>
			<th><label for="title"><span class="accesskey" title="Access Key t">T</span>itle</label></th>
			<td><input type="hidden" name="marclist" value="biblio.title" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="title" name="value" onchange="sql_update()" size="35" accesskey="t" />			<!-- TMPL_UNLESS NAME="Disable_Dictionary" --><a href="javascript:Dopop('dictionary.pl?marclist=biblio.title&amp;type=intranet&amp;index=1',1)">
				<strong>...</strong>
			</a><!-- /TMPL_UNLESS --></td>
		</tr>
		<tr>
			<th><label for="author"><span class="accesskey" title="Access Key a">A</span>uthor</label></th>
			<td><input type="hidden" name="marclist" value="biblio.author" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="author" name="value" onchange="sql_update()" size="35" accesskey="a" />			<!-- TMPL_UNLESS NAME="Disable_Dictionary" --><a href="javascript:Dopop('dictionary.pl?marclist=biblio.author&amp;type=intranet&amp;index=2',2)">
				<strong>...</strong>
			</a><!-- /TMPL_UNLESS --></td>
		</tr>
		<tr>
			<th><label for="subject"><span class="accesskey" title="Access Key s">S</span>ubject</label></th>
			<td><input type="hidden" name="marclist" value="bibliosubject.subject" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />  
			<input type="text" id="subject" name="value" onchange="sql_update()" size="35" accesskey="s" />			<!-- TMPL_UNLESS NAME="Disable_Dictionary" --><a href="javascript:Dopop('dictionary.pl?marclist=bibliosubject.subject&amp;type=intranet&amp;index=3',3)">
				<strong>...</strong>
			</a><!-- /TMPL_UNLESS --></td>
		</tr>
<tr><th><label for="seriestitle">Series title</label></th><td>			
			<input type="hidden" name="marclist" value="biblio.seriestitle" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="seriestitle" name="value" size="35"/></td></tr>
	</table>
	<p><input type="submit" value="Почати пошук" class="submit"></p>
	<table>
		<tr>
			<th><label for="itemtype">Тип одиниці зберігання </label></th>
			<td><input type="hidden" name="marclist" value="biblioitems.itemtype" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="=" />
			<!-- TMPL_VAR name="CGIitemtype" --></td>
		</tr>
		<tr>
				<th><label for="branch">Підрозділ</label></th>
				<td><input type="hidden" name="marclist" value="items.homebranch" />
				<input type="hidden" name="and_or" value="and" />
				<input type="hidden" name="excluding" value="" />
				<input type="hidden" name="operator" value="=" />  
				<!-- TMPL_VAR name="CGIbranch" --></td>
		</tr>
		<tr>
				<th><label for="barcode">Одиниця <span class="accesskey" title="Access Key b">b</span>arcode</label></th>
				<td><input type="hidden" name="marclist" value="items.barcode" />
				<input type="hidden" name="and_or" value="and" />
				<input type="hidden" name="excluding" value="" />
				<input type="hidden" name="operator" value="start" />
				<input type="text" id="barcode" name="value" onchange="sql_update()" size="14" maxlength="14" accesskey="b" /></td> 
		</tr>
		<tr>
			<th><label for="callno"><span class="accesskey" title="Access Key c">C</span>all Number</label></th>
			<td><input type="hidden" name="marclist" value="items.itemcallnumber" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="start" />
			<input type="text" id="callno" name="value" onchange="sql_update()" size="35"  accesskey="c" /></td>
		</tr>
		<tr>
			<th><label for="isbn">ISB<span class="accesskey" title="Access Key n">N</span></label></th>
			<td><input type="hidden" name="marclist" value="biblioitems.isbn" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="=" />
			<input type="text" id="isbn" name="value" onchange="sql_update()" size="35"  accesskey="n" /></td>
		</tr>
		<tr>
			<th><label for="publisher"><span class="accesskey" title="Access Key p">P</span>ublisher</label></th>
			<td><input type="hidden" name="marclist" value="biblioitems.publishercode" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="publisher" name="value" onchange="sql_update()" size="35"  accesskey="p" /></td>
		</tr>
		</table>
		<p><input type="submit" value="Почати пошук" class="submit"></p>
</div>

<div class="table">
	<table>
	<caption>Add MARC Fields to Your Search</caption>
		<!-- TMPL_LOOP NAME="statements" -->
			<tr>
				<td><select name="and_or" size="1" onchange="sql_update()">
					<option value="and">і</option>
					<option <!-- TMPL_IF NAME="or" -->selected <!-- /TMPL_IF -->value="or">або</option>
				</select>
				<!-- TMPL_VAR NAME="marclist" -->
				<select name="excluding" size="1" onchange="sql_update()">
					<option value="0"> </option>
					<option <!-- TMPL_IF NAME="not" -->selected <!-- /TMPL_IF -->value="1">не</option>
				</select>
				<select name="operator" size="1" onchange="sql_update()">
					<option <!-- TMPL_IF NAME="contains" -->selected<!-- /TMPL_IF --> value="contains">містить</option>
					<option <!-- TMPL_IF NAME="eq" -->selected<!-- /TMPL_IF --> value="=">рівне</option>
					<option <!-- TMPL_IF NAME="start" -->selected<!-- /TMPL_IF --> value="start">починається з</option>
					<option <!-- TMPL_IF NAME="gt" -->selected<!-- /TMPL_IF --> value=">">більше аніж</option>
					<option <!-- TMPL_IF NAME="ge" -->selected<!-- /TMPL_IF --> value=">=">більше або рівне</option>
					<option <!-- TMPL_IF NAME="lt" -->selected<!-- /TMPL_IF --> value="<">менше аніж</option>
					<option <!-- TMPL_IF NAME="le" -->selected<!-- /TMPL_IF --> value="<=">менше або рівне</option>
				</select>
				<input type="text" name="value" onchange="sql_update();" <!-- TMPL_IF NAME="value" -->value="<!-- TMPL_VAR NAME="value" -->"<!-- /TMPL_IF -->></td>
			</tr>
		<!-- /TMPL_LOOP -->
		<tr>
		<td><input type="button" value="Додати критерій" onclick="AddStatement(); return false;" class="submit">
		Попередження : оператор "містить" НЕ діє, якщо Ви вводите 2 та менше символів</td>
	</tr>
	<tr>
			<td><div name="sql">
				<textarea name="sql" rows="3" cols="55" disabled readonly></textarea>
			</div></td>
		</tr>
		<tr>
			<td>Результатів на сторінку: <select align="right" name="resultsperpage" size="1">
				<option value="20">20</option>
				<option value="50">50</option>
				<option value="100">100</option>
			</select>
		Впорядкувати за: 
			<select name="orderby" size="1">
				<option value="biblio.title">Заголовок</option>
				<option value="biblio.author">Автор</option>
				<option value="biblioitems.dewey">Індекс Дьюї (ДДК)</option>
				<option value="biblioitems.publicationyear">Рік публікації</option>
				<option value="biblioitems.publishercode">Видавець</option>
			</select>
			<select name="desc_or_asc" size="1">
				<option value="ASC">по зростанню</option>
				<option value="DESC">по спаданню</option>
			</select>
			</td>
		</tr></table>
		<p>
			<input type="submit" value="Почати пошук" class="submit">
			<input type="button" value="Suggest Search Term" class="submit" onclick="PopupSuggestion(); return false;" />
		</p>
		</div>
	</form>
</div>

<script language="javascript" type="text/javascript">
function sql_update() {
document.f.sql.value="";
	for (i=0 ; i<document.f.marclist.length ; i++) {
		if (document.f.value[i].value.length>0) {
			document.f.sql.value = document.f.sql.value+
										document.f.and_or[i].value + ' (' +
										document.f.excluding[i].value + ' ' +
										document.f.marclist[i].value + ' ' +
										document.f.operator[i].value + ' ' +
										'\''+document.f.value[i].value + '\') ';
		}
	}
}

function AddStatement() {

	document.forms['f'].op.value="AddStatement";
	document.f.submit();
}

function Dopop(link,i) {
	var searchstring=document.forms[4].value[i].value;
	newin=window.open(link+'&amp;search='+searchstring,"popup",'width=700,height=550,toolbar=false,scrollbars=yes');
}

function PopupSuggestion() {
    var strQuery="";
	for (i=0 ; i<document.f.marclist.length ; i++) {
		if (document.f.value[i].value.length>0) {
		    strQuery += " "+document.f.value[i].value;
		}
	}
	newin=window.open("suggest.pl?Q="+strQuery,"Suggestions",'width=500,height=400,toolbar=false,scrollbars=yes');
}

</script>

<!-- TMPL_INCLUDE NAME="intranet-bottom.inc" -->