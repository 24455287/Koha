<!-- TMPL_INCLUDE NAME="parameters-top.inc" -->
<div id="mainbloc">
	<!-- TMPL_IF NAME="add_form" -->
		<script language="javascript" type="text/javascript">
			function _(s) { return s } // dummy function for gettext
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function isNotNull(f,noalert) {
					if (f.value.length ==0) {
						return false;
					}
					return true;
			}
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function toUC(f) {
					var x=f.value.toUpperCase();
					f.value=x;
					return true;
			}
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function isNum(v,maybenull) {
			var n = new Number(v.value);
			if (isNaN(n)) {
					return false;
					}
			if (maybenull==0 && v.value=='') {
					return false;
			}
			return true;
			}
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function isDate(f) {
					var t = Date.parse(f.value);
					if (isNaN(t)) {
						return false;                       
					}
			}
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			function Check(f) {
					var ok=1;
					var _alertString="";
					var alertString2;
					if (f.searchfield.value.length==0) {
							_alertString += "\n- " + _("falta el nombre de sitio");
					}
					if (f.host.value.length==0) {
							_alertString += "\n- " + _("falta host ");
					}
					if (f.port.value.length==0) {
							_alertString += "\n- " + _("falta el puerto");
					}
					if (f.db.value.length==0) {
							_alertString += "\n- " + _("falta base de datos");
					}
					if (isNaN(f.port.value)) {
							_alertString += "\n- " + _("el puerto debe ser un n&uacute;mero");
					}
					if (isNaN(f.rank.value)) {
							_alertString += "\n- " + _("la fila debe ser un n&uacute;mero");
					}
					if (isNaN(f.checked.value) || f.checked.value<0 || f.checked.value>1) {
							_alertString += "\n- " + _("la selecci&oacute;n debe ser 0 o 1");
					}
					if (_alertString.length==0) {
							document.Aform.submit();
					} else {
							alertString2  = _("El Formulario no fue procesado debido a los siguientes problemas");
							alertString2 += "\n------------------------------------------------------------------------------------\n";
							alertString2 += _alertString;
							alert(alertString2);
					}
			}
		</script>
		<!-- TMPL_IF NAME="searchfield" -->
				<h1>Modificar Servidor Z39.50</h1>
		<!-- TMPL_ELSE -->
				<h1>A&ntilde;adir servidor Z39.50</h1>
		<!-- /TMPL_IF -->
		<form action="<!-- TMPL_VAR NAME="script_name" -->" name="Aform" method="post">
			<input type="hidden" name="op" value="add_validate">
			<!-- TMPL_IF NAME="searchfield" -->
				<p>
					<label class="label100">Servidor Z39.50</label>
					<input type="hidden" name="searchfield" value="<!-- TMPL_VAR NAME="searchfield" -->"><!-- TMPL_VAR NAME="searchfield" -->
				</p>
			<!-- TMPL_ELSE -->
				<p>
					<label class="label100">Servidor Z39.50</label>
					<input type="text" name="searchfield" size="100" maxlength="100" onblur="toUC(this)">
				</p>
			<!-- /TMPL_IF -->
			<p>
				<label class="label100">Hostname</label>
				<input type="text" name="host" size="30" value="<!-- TMPL_VAR NAME="host" -->">
			</p>
			<p>
				<label class="label100">Puerto</label>
				<input type="text" name="port" size="5" value="<!-- TMPL_VAR NAME="port" -->" onblur="isNum(this)">
			</p>
			<p>
				<label class="label100">Base de Datos</label>
				<input type="text" name="db" value="<!-- TMPL_VAR NAME="db" -->">
			</p>
			<p>
				<label class="label100">ID de usuario</label>
				<input type="text" name="userid" value="<!-- TMPL_VAR NAME="userid" -->">
			</p>
			<p>
				<label class="label100">Clave</label>
				<input type="text" name="password" value="<!-- TMPL_VAR NAME="password" -->">
			</p>
			<p>
				<label class="label100">Marcado (buscado por defecto)</label>
				<input type="text" size="1" name="checked" value="<!-- TMPL_VAR NAME="checked" -->" onblur="isNum(this)">
			</p>
			<p>
				<label class="label100">Orden (Orden de aparici&oacute;n)</label>
				<input type="text" name="rank" size="4" value="<!-- TMPL_VAR NAME="rank" -->" onblur="isNum(this)">
			</p>
			<p>
				<label class="label100">Sintaxis (z3950 puede enviar registros en varios formatos. Elija uno)</label>
				<select name="syntax">
					<option value="MARC21">MARC21</option>
					<option value="UNIMARC">UNIMARC</option>
				</select>
			</p>
			<input type="button" value="ACEPTAR" onclick="Check(this.form)" class="button">
		</form>
	<!-- /TMPL_IF -->
	
	<!-- TMPL_IF NAME="add_validate" -->
		Datos guardados
		<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
			<input type="submit" value="ACEPTAR" class="button">
		</form>
	<!-- /TMPL_IF -->
	
	<!-- TMPL_IF NAME="delete_confirm" -->
		<!-- TMPL_VAR NAME="reqsel" -->
			<table>
			<tr>
				<th>Sitio</th>
				<th><!-- TMPL_VAR NAME="searchfield" --></th>
			</tr>
			<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
				<input type="hidden" name="op" value="delete_confirmed">
				<input type="hidden" name="searchfield" value="<!-- TMPL_VAR NAME="searchfield" -->">
			<tr>
				<td>Hostname</td>
				<td><!-- TMPL_VAR NAME="host" --></td>
			</tr>
			<tr>
				<td>Puerto</td>
				<td><!-- TMPL_VAR NAME="port" --></td>
			</tr>
			<tr>
				<td>Base de Datos</td>
				<td><!-- TMPL_VAR NAME="db" --></td>
			</tr>
			<tr>
				<td>ID de usuario</td>
				<td><!-- TMPL_VAR NAME="userid" --></td>
			</tr>
			<tr>
				<td>Clave</td>
				<td><!-- TMPL_VAR NAME="password" --></td>
			</tr>
			<tr>
				<td>Marcado</td>
				<td><!-- TMPL_VAR NAME="checked" --></td>
			</tr>
			<tr>
				<td>Orden</td>
				<td><!-- TMPL_VAR NAME="rank" --></td>
			</tr>
			<tr>
				<td colspan="2" align="center">CONFIRMAR BORRADO</td>
			</tr>
			<tr>
				<td><input type="submit" value="SI"></form></td>
				<td><form action="<!-- TMPL_VAR NAME="script_name" -->" method="post"><input type="submit" value="NO"></form></td>
			</tr>
		</table>
	<!-- /TMPL_IF -->

	<!-- TMPL_IF NAME="delete_confirmed" -->
			Datos borrados
			<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
					<input type="submit" value="ACEPTAR">
			</form>
	<!-- /TMPL_IF -->
	
	<!-- TMPL_IF NAME="else" -->
			<h1 class="parameters">Administraci&oacute;n de Servidores Z39.50</h1>
			<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
				<input type="text" name="description" value="<!-- TMPL_VAR NAME="searchfield" -->">
				<input type="submit" name="ok" value="ACEPTAR" class="button">
			</form>
			<!-- TMPL_IF NAME="searchfield" -->
				Usted busc&oacute; <b><!-- TMPL_VAR NAME="searchfield" --></b>
			<!-- /TMPL_IF -->
			<table>
				<tr>
					<th>Sitio</th>
					<th>Hostname</th>
					<th>Puerto</th>
					<th>Base de Datos</th>
					<th>ID de usuario</th>
					<th>Clave</th>
					<th>Marcado</th>
					<th>Orden</th>
					<th>Sintaxis</th>
					<th> </td>
					<th> </td>
				</tr>
				<!-- TMPL_LOOP NAME="loop" -->
				<!-- TMPL_IF NAME="toggle" --><tr><!-- TMPL_ELSE --><tr class="hilighted"><!-- /TMPL_IF -->
					<td><!-- TMPL_VAR NAME="name" --></td>
					<td><!-- TMPL_VAR NAME="host" --></td>
					<td><!-- TMPL_VAR NAME="port" --></td>
					<td><!-- TMPL_VAR NAME="db" --></td>
					<td><!-- TMPL_VAR NAME="userid" --></td>
					<td><!-- TMPL_VAR NAME="password" --></td>
					<td><!-- TMPL_VAR NAME="checked" --></td>
					<td><!-- TMPL_VAR NAME="rank" --></td>
					<td><!-- TMPL_VAR NAME="syntax" --></td>
					<td><a href="<!-- TMPL_VAR NAME="script_name" -->?op=add_form&amp;searchfield=<!-- TMPL_VAR NAME="name" -->"><img src="<!-- TMPL_VAR NAME="interface" -->/<!-- TMPL_VAR NAME="theme" -->/images/fileopen.png" alt="Editar" title="editar" border="0"></a></td>
					<td><a href="<!-- TMPL_VAR NAME="script_name" -->?op=delete_confirm&amp;searchfield=<!-- TMPL_VAR NAME="name" -->"><img src="<!-- TMPL_VAR NAME="interface" -->/<!-- TMPL_VAR NAME="theme" -->/images/edittrash.png" alt="Borrar" title="borrar" border="0"></a></td>
				</tr>
				<!-- /TMPL_LOOP -->
		</table>
		<form action="<!-- TMPL_VAR NAME="script_name" -->" method="post">
			<input type="hidden" name="op" value="add_form">
			<!-- TMPL_IF NAME="offsetgtzero" -->
					<a href="<!-- TMPL_VAR NAME="script_name" -->?offset=<!-- TMPL_VAR NAME="prevpage" -->" class="button">&lt;&lt; Anterior</a>
			<!-- /TMPL_IF -->
			<!-- TMPL_IF NAME="ltcount" -->
					<a href="<!-- TMPL_VAR NAME="script_name" -->?offset=<!-- TMPL_VAR NAME="nextpage" -->" class="button">Siguiente &gt;</a>
			<!-- /TMPL_iF -->
			<input type="submit" class="button" alt="A&ntilde;adir servidor Z39.50" value="A&ntilde;adir servidor Z39.50">
		</form>
	
	<!-- /TMPL_IF -->
</div>
<!-- TMPL_INCLUDE NAME="parameters-bottom.inc" -->
